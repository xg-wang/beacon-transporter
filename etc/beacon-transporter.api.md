## API Report File for "beacon-transporter"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import { gzipSync } from 'fflate';

// @public (undocumented)
export type BeaconFunc = (url: string, body: string, headers?: Record<string, string>) => Promise<RequestResult>;

// @public (undocumented)
export interface BeaconInit<CustomRetryDB = IRetryDBBase> {
    // (undocumented)
    compress?: boolean;
    // (undocumented)
    disablePersistenceRetry?: boolean;
    // (undocumented)
    inMemoryRetry?: {
        attemptLimit?: number;
        statusCodes?: number[];
        headerName?: string;
        calculateRetryDelay?: (attempCount: number, countLeft: number) => number;
    };
    // (undocumented)
    persistenceRetry?: {
        idbName?: string;
        attemptLimit?: number;
        statusCodes?: number[];
        maxNumber?: number;
        batchEvictionNumber?: number;
        throttleWait?: number;
        headerName?: string;
        useIdle?: boolean;
        measureIDB?: {
            createStartMark: string;
            createSuccessMeasure: string;
            createFailMeasure: string;
        };
    };
    // (undocumented)
    retryDB?: CustomRetryDB;
}

// @public (undocumented)
export function createBeacon(init?: BeaconInit): {
    beacon: BeaconFunc;
    database: RetryDB;
};

// @public (undocumented)
export function createBeacon<CustomRetryDBType extends IRetryDBBase>(init?: BeaconInit<CustomRetryDBType>): {
    beacon: BeaconFunc;
    database: CustomRetryDBType;
};

// @public (undocumented)
export const fetchFn: (url: string, body: string, headers: Record<string, string>, compress: boolean) => Promise<Exclude<RequestResult, RequestPersisted>>;

export { gzipSync }

// @public (undocumented)
export interface IRetryDB extends IRetryDBBase {
    // (undocumented)
    clearQueue(): Promise<void>;
    // (undocumented)
    peekBackQueue(count: number): Promise<RetryEntry[]>;
    // (undocumented)
    peekQueue(count: number): Promise<RetryEntry[]>;
}

// @public (undocumented)
export interface IRetryDBBase {
    // (undocumented)
    notifyQueue(): void;
    // (undocumented)
    onClear(cb: () => void): void;
    // (undocumented)
    pushToQueue(entry: RetryEntry): void;
    // (undocumented)
    removeOnClear(cb: () => void): void;
}

// @public (undocumented)
export function isGlobalFetchSupported(): boolean;

// @public (undocumented)
export function isKeepaliveFetchSupported(): boolean;

// @public (undocumented)
export interface RequestNetworkError {
    // (undocumented)
    rawError: string;
    // (undocumented)
    statusCode: undefined;
    // (undocumented)
    type: 'network';
}

// @public (undocumented)
export interface RequestPersisted {
    // (undocumented)
    statusCode: number | undefined;
    // (undocumented)
    type: 'persisted';
}

// @public (undocumented)
export interface RequestResponseError {
    // (undocumented)
    rawError: string;
    // (undocumented)
    statusCode: number;
    // (undocumented)
    type: 'response';
}

// @public (undocumented)
export type RequestResult = RequestSuccess | RequestPersisted | RequestNetworkError | RequestResponseError | undefined;

// @public (undocumented)
export interface RequestSuccess {
    // (undocumented)
    statusCode: number;
    // (undocumented)
    type: 'success';
}

// Warning: (ae-internal-missing-underscore) The name "RequiredInMemoryRetryConfig" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal (undocumented)
export type RequiredInMemoryRetryConfig = Required<Pick<NonNullable<BeaconInit['inMemoryRetry']>, 'statusCodes' | 'attemptLimit' | 'calculateRetryDelay'>> & NonNullable<BeaconInit['inMemoryRetry']>;

// Warning: (ae-internal-missing-underscore) The name "RequiredPersistenceRetryConfig" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal (undocumented)
export type RequiredPersistenceRetryConfig = Required<Pick<NonNullable<BeaconInit['persistenceRetry']>, 'idbName' | 'attemptLimit' | 'statusCodes' | 'maxNumber' | 'batchEvictionNumber' | 'throttleWait'>> & NonNullable<BeaconInit['persistenceRetry']>;

// @public (undocumented)
export class RetryDB implements IRetryDB {
    // Warning: (ae-incompatible-release-tags) The symbol "__constructor" is marked as @public, but its signature references "RequiredPersistenceRetryConfig" which is marked as @internal
    constructor(config: RequiredPersistenceRetryConfig, extraConfig: Pick<BeaconInit, 'compress' | 'disablePersistenceRetry'>);
    // (undocumented)
    clearQueue(): Promise<void>;
    // (undocumented)
    static hasSupport: boolean;
    // (undocumented)
    notifyQueue(): void;
    // (undocumented)
    onClear(cb: () => void): void;
    // (undocumented)
    peekBackQueue(count: number): Promise<RetryEntry[]>;
    // (undocumented)
    peekQueue(count: number): Promise<RetryEntry[]>;
    // (undocumented)
    pushToQueue(entry: RetryEntry): void;
    // (undocumented)
    removeOnClear(cb: () => void): void;
}

// @public (undocumented)
export interface RetryEntry {
    // (undocumented)
    attemptCount: number;
    // (undocumented)
    body: string;
    // (undocumented)
    headers?: Record<string, string>;
    // (undocumented)
    statusCode?: number;
    // (undocumented)
    timestamp: number;
    // (undocumented)
    url: string;
}

// @public (undocumented)
export function xhr(url: string, body: string, options?: {
    headers?: Record<string, string>;
}): void;

```
