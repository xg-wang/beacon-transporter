## API Report File for "beacon-transporter"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import { gzipSync } from 'fflate';

// @public (undocumented)
export interface BeaconConfig {
    // (undocumented)
    retry: {
        limit: number;
        headerName?: string;
        inMemoryRetryStatusCodes?: number[];
        persist?: boolean;
        persistRetryStatusCodes?: number[];
        calculateRetryDelay?: (countLeft: number) => number;
    };
}

// @public (undocumented)
export type BeaconFunc = (url: string, body: string, headers?: Record<string, string>) => Promise<RetryRejection | RequestSuccess | undefined>;

// @public (undocumented)
export interface BeaconInit {
    // (undocumented)
    beaconConfig?: BeaconConfig;
    // (undocumented)
    compress?: boolean;
    // (undocumented)
    retryDBConfig?: RetryDBConfig;
}

// @public (undocumented)
export interface BeaconInitWithCustomDB<CustomRetryDBType> {
    // (undocumented)
    beaconConfig?: BeaconConfig;
    // (undocumented)
    compress?: boolean;
    // (undocumented)
    retryDB: CustomRetryDBType;
}

// @public (undocumented)
export function createBeacon(init?: BeaconInit): {
    beacon: BeaconFunc;
    database: RetryDB;
};

// @public (undocumented)
export function createBeacon<CustomRetryDBType extends IRetryDBBase>(init?: BeaconInitWithCustomDB<CustomRetryDBType>): {
    beacon: BeaconFunc;
    database: CustomRetryDBType;
};

// @public (undocumented)
export function createLocalStorageRetryDB({ keyName, throttleWait, headerName, attemptLimit, compressFetch, }: LocalStorageRetryDBConfig): LocalStorageRetryDB;

export { gzipSync }

// @public (undocumented)
export interface IRetryDB extends IRetryDBBase {
    // (undocumented)
    clearQueue(): Promise<void>;
    // (undocumented)
    peekBackQueue(count: number): Promise<RetryEntry[]>;
    // (undocumented)
    peekQueue(count: number): Promise<RetryEntry[]>;
}

// @public (undocumented)
export interface IRetryDBBase {
    // (undocumented)
    notifyQueue(config: QueueNotificationConfig): void;
    // (undocumented)
    onClear(cb: () => void): void;
    // (undocumented)
    pushToQueue(entry: RetryEntry): void;
    // (undocumented)
    removeOnClear(cb: () => void): void;
}

// @public (undocumented)
export interface LocalStorageRetryDB extends IRetryDBBase {
    // (undocumented)
    clearQueue: () => void;
    // (undocumented)
    peekQueue: (count?: number) => RetryEntry[];
}

// @public (undocumented)
export interface LocalStorageRetryDBConfig {
    // (undocumented)
    attemptLimit: number;
    // (undocumented)
    compressFetch: boolean;
    // (undocumented)
    headerName?: string;
    // (undocumented)
    keyName: string;
    // (undocumented)
    throttleWait: number;
}

// @public (undocumented)
export interface NetworkRetryRejection {
    // (undocumented)
    statusCode: undefined;
    // (undocumented)
    type: 'network';
}

// @public (undocumented)
export interface QueueNotificationConfig {
    // (undocumented)
    allowedPersistRetryStatusCodes: number[];
}

// @public (undocumented)
export interface RequestSuccess {
    // (undocumented)
    statusCode: 200;
    // (undocumented)
    type: 'success';
}

// @public (undocumented)
export interface ResponseRetryRejection {
    // (undocumented)
    statusCode: number;
    // (undocumented)
    type: 'response';
}

// @public (undocumented)
export class RetryDB implements IRetryDB {
    constructor(config: RetryDBConfig, compress?: boolean);
    // (undocumented)
    clearQueue(): Promise<void>;
    // (undocumented)
    static hasSupport: boolean;
    // (undocumented)
    notifyQueue(config: QueueNotificationConfig): void;
    // (undocumented)
    onClear(cb: () => void): void;
    // (undocumented)
    peekBackQueue(count: number): Promise<RetryEntry[]>;
    // (undocumented)
    peekQueue(count: number): Promise<RetryEntry[]>;
    // (undocumented)
    pushToQueue(entry: RetryEntry): void;
    // (undocumented)
    removeOnClear(cb: () => void): void;
}

// @public (undocumented)
export interface RetryDBConfig {
    // (undocumented)
    attemptLimit: number;
    // (undocumented)
    batchEvictionNumber: number;
    // (undocumented)
    dbName: string;
    // (undocumented)
    headerName?: string;
    // (undocumented)
    maxNumber: number;
    // (undocumented)
    measureIDB?: {
        create?: {
            createStartMark: string;
            createSuccessMeasure: string;
            createFailMeasure: string;
        };
    };
    // (undocumented)
    throttleWait: number;
    // (undocumented)
    useIdle?: () => boolean;
}

// @public (undocumented)
export interface RetryEntry {
    // (undocumented)
    attemptCount: number;
    // (undocumented)
    body: string;
    // (undocumented)
    headers?: Record<string, string>;
    // (undocumented)
    statusCode?: number;
    // (undocumented)
    timestamp: number;
    // (undocumented)
    url: string;
}

// @public (undocumented)
export type RetryRejection = NetworkRetryRejection | ResponseRetryRejection;

```
